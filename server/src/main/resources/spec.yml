openapi: 3.0.0
info:
  title: donor API
  version: 0.0.0

tags:
  - name: Auth
    description: Authentication and session management


paths:
  # *******************************************************************************
  #                           Account
  # *******************************************************************************
  #  /api/getAccount:
  #    get:
  #      operationId: getAccount
  #      tags:
  #        - Account
  #      responses:
  #        '200':
  #          description: Result
  #          content:
  #            application/json:
  #              schema:
  #                type: array
  #                items:
  #                  $ref: '#/components/schemas/AccountData'
  #
  #  /api/getFeatures:
  #    post:
  #      operationId: getFeatures
  #      tags:
  #        - Account
  #      requestBody:
  #        required: true
  #        content:
  #          application/json:
  #            schema:
  #              $ref: '#/components/schemas/AccountData'
  #      responses:
  #        '200':
  #          description: Result
  #          content:
  #            application/json:
  #              schema:
  #                type: array
  #                items:
  #                  $ref: '#/components/schemas/Feature'

  # *******************************************************************************
  #                           Auth
  # *******************************************************************************
  /api/register-account:
    post:
      operationId: registerAccount
      tags:
        - Auth
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AccountRegisterData'
      responses:
        '200':
          description: Result
  /api/checkSession:
    post:
      operationId: checkSession
      tags:
        - Auth
      responses:
        '200':
          description: Result
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SessionInfoData'

  /api/confirm-account/{confirmToken}:
    get:
      operationId: confirmAccount
      parameters:
        - $ref: '#/components/parameters/confirmToken'
      tags:
        - Auth
      responses:
        '200':
          description: Result


  /api/login:
    post:
      operationId: login
      tags:
        - Auth
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequestData'
      responses:
        '200':
          description: Result
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SessionInfoData'

  /api/logout:
    post:
      operationId: logout
      tags:
        - Auth
      responses:
        '200':
          description: Result

  # *******************************************************************************
  #                           Map
  # *******************************************************************************

  /api/getAllPoint:
    get:
      operationId: getAllPointer
      tags:
        - Map
      responses:
        '200':
          description: Result
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/MapPointData'

  /api/getFullInfo:
    post:
      operationId: getFullInfo
      tags:
        - Map
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MapPointData'
      responses:
        '200':
          description: Result
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MapPointerFullInfoData'

  /api/mapPoint:
    post:
      operationId: addPoint
      tags:
        - Map
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MapPointerFullInfoData'
      responses:
        '200':
          description: Result
    put:
      operationId: editPoint
      tags:
        - Map
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MapPointerFullInfoData'
      responses:
        '200':
          description: Result

  /api/deleteMapPoint:
    post:
      operationId: deletePoint
      tags:
        - Map
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MapPointData'
      responses:
        '200':
          description: Result

  # *******************************************************************************
  #                           Form
  # *******************************************************************************


components:
  parameters:
    confirmToken:
      name: confirmToken
      in: path
      description: confirmToken.
      required: true
      schema:
        type: string

  schemas:
    AccountRegisterData:
      properties:
        displayName:
          type: string
        email:
          type: string
        password:
          type: string

    LoginRequestData:
      properties:
        login:
          type: string
        password:
          type: string

    MapPointData:
      properties:
        id:
          type: integer
          format: int64
        tal:
          type: number
          format: double
        lng:
          type: number
          format: double

    MapPointerFullInfoData:
      properties:
        mapPoint:
          $ref: "#/components/schemas/MapPointData"
        name:
          type: string
        address:
          type: string
        phone:
          type: string
        info:
          type: string
        important:
          type: string
        time:
          type: string
        photo:
          type: string

    Feature:
      properties:
        id:
          type: integer
          format: int64
        feature:
          type: string


    SessionInfoData:
      properties:
        sessionId:
          type: string
        accountId:
          type: integer
          format: int64
        superAdmin:
          type: boolean
        permission:
          type: string
        #        features:
        #          type: array
        #          items:
        #            $ref: "#/components/schemas/Feature"
        displayName:
          type: string

    AccountData:
      properties:
        id:
          type: integer
          format: int64
        displayName:
          type: string
        superAdmin:
          type: boolean
        active:
          type: boolean
        permission:
          type: string
        confirmed:
          type: boolean

  #    FType:
  #      type: string
  #      enum:
  #        - user
  #        - admin
  #        - superAdmin
  #        - reception

  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer

security:
  - bearerAuth: [ ]